<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Applicants for {{ job.title }}</title>
  <style>
    body { font-family: Arial; background: #f8f8f8; margin:0; }
    .wrap { max-width:900px; margin:28px auto; padding:18px; }
    .app { background:#fff; padding:14px; border-radius:8px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; }
    .info { max-width: 70%; }
    .btn { padding:8px 10px; border-radius:6px; text-decoration:none; border:1px solid #ddd; background:#fff; margin-right:5px; cursor:pointer; }
    .btn.primary { background:#00a859; color:#fff; border:none; }
    .status { font-weight:600; }
    .cover-link { display:block; margin:5px 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Applicants ‚Äî {{ job.title }}</h2>

    {% if applicants %}
      {% for a in applicants %}
      <div class="app">
        <div class="info">
          <h3 style="margin:0">{{ a.user.full_name }}</h3>
          <p style="margin:2px 0">{{ a.user.email }} ‚Ä¢ Applied: {{ a.applied_at.strftime('%Y-%m-%d') }}</p>

          {% if a.cover_letter %}
            <p class="cover-link">
              üìÑ Cover Letter: 
              <a href="{{ url_for('static', filename='uploads/' + a.cover_letter) }}" target="_blank">
                View / Download
              </a>
            </p>
          {% else %}
            <p>üìÑ Cover Letter: ‚Äî</p>
          {% endif %}

          <p>Status: <span class="status">{{ a.status }}</span></p>
        </div>
        <div>
          <form method="POST" action="{{ url_for('update_application_status', app_id=a.id) }}" style="display:inline">
            <input type="hidden" name="status" value="SHORTLISTED">
            <button class="btn" type="submit">Shortlist</button>
          </form>
          <form method="POST" action="{{ url_for('update_application_status', app_id=a.id) }}" style="display:inline">
            <input type="hidden" name="status" value="REJECTED">
            <button class="btn" type="submit">Reject</button>
          </form>
          <form method="POST" action="{{ url_for('update_application_status', app_id=a.id) }}" style="display:inline">
            <input type="hidden" name="status" value="HIRED">
            <button class="btn primary" type="submit">Hire</button>
          </form>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p>No applicants yet.</p>
    {% endif %}

    <p><a href="{{ url_for('employer_dashboard') }}">‚Üê Back to dashboard</a></p>
  </div>
</body>
</html>
